# SkillFactory DataScience
 
## Module_5: Разведывательный анализ данных (Exploratory data analysis) + Feature Engineering (FE) + ML и предсказательная классификация  

## Цель: Научиться подготавливать данные и модель, включая гиперпараметры, для решения задачи классификации

## Задачи: 
* Анализируя результат ML попытаться обогатить модель подходящими параметрам
* Попробовать разные методы разбиения данных
* Посмотреть влияние гиперпараметров
* Посмотреть взаимосвязь различных метрик (f1, auc и другие)


# Результат и выводы


## Кратка информацию о данных
* Дана некоторая информация о ресторанах на TripAdisor. 
* Нужно по данным сведениям о ресторанах предсказать рейтинг ресторанов на TA используя ML.

## Этапы работы над проектом
* Проверка данных напропуски
* Оценка параметров влияющих на рейтинг
* Приведение параметров доступных для ML и заполнение пропусков
* Генерация новых параметров используя внутренние данные
* Генерация новых параметров используя внешние данные
* Анализ данных и поиск методов улучшения модели и многократный повтор всех вышеперечисленных пунктов.

# Резултаты (что было проделано)
1. В данных нет пропусков практически, только в категории образование. Тестирование показало, что лучше всего пропуски заменить на SCH, чем добавлять новую категорию (без обр). 
2. Данные по дате регистрации заявки на получение кредита были переведены в численные значения (в единицах "день"). 
3. Все численные параметры были до полинома 2й степени перемножены и добавлены в рассмотрение.  
4. Были попытки добавления полиномов более высокого порядка, но значительных преимуществ это не принесло.
5. Все численные переменные были логорифмированы, что сделало их распределение более нормальным и улучшело предсказание.
6. В некоторых данных есть выбросы (например, очень высокие доходы), но с ними решено было ничего не делать. 
7. Сравнивал оптимизацию гиперпараметров (2 массива гиперпараметров сравнивались отдельно) оптимизирую f1 и roc_auc. f1 дает более высокую прибыль (см. далее), а roc_auc повышает скоринг (этот параметр сравнивается в лидерборде).
8. roc_auc, confusion_matrix и public leader board scoring, а также короткое описание изменений написаны в df=results в конце документа. Там видно, что если гиперпараметры не оптимизировать, или оптимизировать для roc_auc, то f1 будет низким, также как и предполагаемая выручка компании. Это происходит из-за большого колличества ложно-отрицательных предсказаний (выдача заведомо дефолтных-кредитов).
9. Вывод, roc_auc хороший параметр, но f1 лучше отображает потребности компании, а лучше ввести функцию типа profit.
10. Пробовал разные типы разбиения данных: train_test_split, KFold, StratifiedShuffleSplit, они все показывали похожие на train_test_split метрики.
11. Лучший результат на Kaggle LeaderBoard от 20210211, 11 место Andrey Pravdivtsev скоринг 0.73832


# Что еще можно было бы сделать?
1. Добавить например обратные величины от численных,  например 1/days, и создать на их освное другие переменные.
2. Протестировать вклад от устранения выбросов в данных. 
3. Попробовать oversampling/undersampling.
4. Другие модели, отличные от LogisticRegression
5. Более аккуратно переписать ноутбук для публикации, возможно с добавление классов. 

 
 
 
 
 
 
Шаг 1. В качестве ответа на задание:

1. Укажите название команды/никнейма на Kaggle, чтобы мы могли найти вас на лидерборде

2. Укажите значение метрики, которого вам удалось добиться

3. Прикрепите ссылку на github с вашим решением

4.*Если вы работали в команде, ответьте на вопросы: 

Кратко опишите, что вы делали в рамках проекта.
Как вы оцениваете свой вклад в командную работу?
Шаг 2. Позднее ментор даст вам развернутую обратную связь. 

## Ответы на вопросы саморефлексии:

1. Какова была ваша роль в команде?
- Я был один в команде.

2. Какой частью своей работы вы остались особенно довольны?
- Оценка влияния разных методов заполнения пропусков.

3. Что не получилось сделать так, как хотелось? Над чем ещё стоит поработать?
- Реализация всех в основных элементов EDA, FE в единой функции мне не понравилась.

4. Что интересного и полезного вы узнали в этом модуле?
- Узнал о новых методах FE и о том, что очевидные для человека соотношения, например город-страна, необходимо сообщить модели и это может улучшить модель.

5. Что является вашим главным результатом при прохождении этого проекта?
- Понимание того, какие данные могут быть важным для ML.

6. Какие навыки вы уже можете применить в текущей деятельности?
- EDA, FE.

7. Планируете ли вы дополнительно изучать материалы по теме проекта?
- Планирую поучаствовать в соревнованиях по DS. 
